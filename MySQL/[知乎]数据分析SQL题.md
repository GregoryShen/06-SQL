# 引号问题

## [SQL 语句中单引号、双引号和反引号的区分](https://www.cnblogs.com/liuurick/p/10713694.html)

### 反引号

反引号一般在 ESC 键的下方，为了区分 MySQL 的保留字与普通字符而引入的符号。

一般我们建表时都会将表名、库名加上反引号来保证语句的执行度。

例如：

```mysql
select * from `user` where username like '%王%';
```

在 user 表中有个 user 字段，如果不用反引号，MySQL 将把 user 视为保留字而导致出错，所以有MySQL 保留字作为字段的，必须加上反引号来区分。

### 引号

单引号 和 双引号

在标准 SQL 中，字符串使用的是单引号。

如果字符串本身也包括单引号，则使用两个单引号（注意，不是双引号，字符串中的双引号不需要另外转义）。

MySQL 对 SQL 的扩展，允许使用单引号和双引号两种

## [MySQL 查询语句中单引号、双引号、反引号的区别 - MySQL 系列教程](https://kalasearch.cn/community/tutorials/single-double-quote-and-backticks-in-mysql-queries/)

在使用 MySQL 查询语句的时候，我们有时候会碰到字符串包含「单引号」或「双引号」甚至「反引号」的情况，那么他们之间究竟有什么区别？这些引号又是如何用转义表示的。

要在 MySQL 里使用单双引号、反引号，首先我们要明白两个基本知识点：

1. 引号（无论单双）是在字符串上使用的。
2. 反引号是用在表和列名上的。

双引号

这里有一些使用双引号的输出案例：

```mysql
SELECT "test", "'test'", "''test''", "te""st"";
```

输出如下：

| test | 'test' | "test" | te"st |
| ---- | ------ | ------ | ----- |



# [图解SQL面试题：经典50题](https://zhuanlan.zhihu.com/p/38354000)

## 创建数据库和表

## 向表中添加数据

## 50 道面试题

### 简单查询

### 汇总分析

#### 汇总分析

#### 分组

#### 分组结果的条件

##### 查询平均成绩大于60分学生的学号和平均成绩

这道题和下面重复了

```sql
SELECT `学号`, AVG(`成绩`) AS 平均成绩 FROM score GROUP BY `学号` HAVING 平均成绩 >= 80;
```

官方分析及答案：

/*

题目翻译成大白话：

平均成绩：展开来说就是计算每个学生的平均成绩

这里涉及到“每个”就是要分组了

平均成绩大于60分，就是对分组结果指定条件

分析思路

select 查询结果 [学号, 平均成绩：汇总函数avg(成绩)]

from 从哪张表中查找数据 [成绩在成绩表中，所以查找的是成绩表score]

where 查询条件 [没有]

group by 分组 [平均成绩：先按学号分组，再计算平均成绩]

having 对分组结果指定条件 [平均成绩大于60分]

*/

```sql
select 学号, avg(成绩)
from score
group by 学号
having avg(成绩)>60;
```

##### 查询至少选修两门课程的学生学号

我的答案：

```sql
SELECT `学号`, COUNT(`课程号`) AS 选课数 from score GROUP BY `学号` HAVING COUNT(`课程号`) > 2;
```

查询结果：

| 学号 | 选课数 |
| ---- | ------ |
| 0001 | 3      |
| 0003 | 3      |



##### 查询同名同姓学生名单并统计同名人数

我的答案：

```sql
SELECT `姓名`, COUNT(`姓名`) AS 同名人数 FROM student GROUP BY `姓名`;
```

查询结果：

| 学号   | 选课数 |
| ------ | ------ |
| 猴子   | 2      |
| 马云   | 1      |
| 王思聪 | 1      |



##### 查询不及格的课程并按课程号从大到小排列

我的答案：

```sql
SELECT * FROM score WHERE `成绩` < 90 ORDER BY `课程号` DESC;
```

查询结果：

| 学号 | 课程号 | 成绩 |
| ---- | ------ | ---- |
| 0002 | 0003   | 80   |
| 0003 | 0003   | 80   |
| 0002 | 0002   | 60   |
| 0003 | 0002   | 80   |
| 0001 | 0001   | 80   |
| 0003 | 0001   | 80   |



##### 查询每门课程的平均成绩，结果按平均成绩升序排序，平均成绩相同时，按课程号降序排列

我的答案：

```sql
SELECT `课程号`, AVG(`成绩`) AS 平均成绩 FROM score GROUP BY `课程号` ORDER BY 平均成绩 ASC;
```

==**<u>平均成绩相同时，按课程号降序排列</u>** 不会写==

查询结果：

| 课程号 | 平均成绩 |
| ------ | -------- |
| 0002   | 76.6667  |
| 0001   | 80.0000  |
| 0003   | 86.3333  |



##### 检索课程编号为“0004”且分数小于60的学生学号，结果按分数降序排列

我的答案：（没有看到有0004的课程，所以改成0001）

```sql
SELECT * FROM score WHERE `成绩` <= 90 AND `课程号` = '0001' ORDER BY `成绩` DESC;
```

查询结果：

| 学号 | 课程号 | 成绩 |
| ---- | ------ | ---- |
| 0001 | 0001   | 80   |
| 0003 | 0001   | 80   |

##### 统计每门课程的学生选修人数（超过2人的课程才统计）

要求输出课程号和选修人数，查询结果按人数降序排序，若人数相同，按课程号升序排序

**<u>==若人数相同，按课程号升序排序==</u>**不会写

我的答案：

```sql
SELECT `课程号`, COUNT(`学号`) AS 选修人数 from score GROUP BY `课程号` HAVING COUNT(`学号`) >= 2 ORDER BY 选修人数 DESC;
```

查询结果：

| 课程号 | 选修人数 |
| ------ | -------- |
| 0002   | 3        |
| 0003   | 3        |
| 0001   | 2        |



##### 查询两门以上不及格课程的同学的学号及其平均成绩

**<u>==两门以上不及格课程==</u>**不会写

我的答案：

```sql
SELECT `学号`, AVG(`成绩`) AS 平均成绩 FROM score GROUP BY `学号` HAVING 平均成绩 <= 80;
```

查询结果：

| 学号 | 平均成绩 |
| ---- | -------- |
| 0002 | 70.0000  |
| 0003 | 80.0000  |

官方分析及答案：

/*

分析思路

先分解题目：

1）[两门以上] [不及格课程] 限制条件

2）[同学的学号及其平均成绩], 也就是每个学生的平均成绩，显示学号，平均成绩

分析过程：

第1步：得到每个学生的平均成绩，显示学号，平均成绩

第2步：再加上限制条件：

1）不及格课程

2）两门以上 [不及格课程]: 课程数目>2



/*

第1步：得到每个学生的平均成绩，显示学号，平均成绩

select 查询结果 [学号，平均成绩：汇总函数avg(成绩)]

from 从哪张表中查找数据 [涉及到成绩：成绩表score]



#### 查询结构排序，分组的指定条件

##### 查询学生的总成绩并进行排名

我的答案：

```sql
SELECT 学号, SUM(成绩) as 总成绩 FROM score GROUP BY `学号` ORDER BY `总成绩` DESC;
```

查询结果：

| 学号 | 总成绩 |
| ---- | ------ |
| 0001 | 269    |
| 0003 | 240    |
| 0002 | 140    |

官方分析及答案：

【知识点】分组查询

/*

分析思路

select 查询结果 [总成绩：sum(成绩)，学号]

from 从哪张表中查找数据 [成绩表 score]

where 查询条件 [没有]

group by 分组 [学生的总成绩：按照每个学生学号进行分组]

order by 排序 [按照总成绩进行排序：sum(成绩)]；

*/

```sql
select 学号, sum(成绩) from score
group by 学号
order by sum(成绩);
```

##### 查询平均成绩大于60分的学生的学号和平均成绩

我的答案：

```sql
SELECT `学号`, AVG(`成绩`) AS 平均成绩 FROM score GROUP BY `学号` HAVING 平均成绩 >= 80;
```

查询结果：

| 学号 | 平均成绩 |
| ---- | -------- |
| 0001 | 89.6667  |
| 0003 | 80.0000  |

官方分析及答案：

【知识点】分组+条件

/*

分析思路

select 查询结果 [学号，平均成绩：avg(成绩)]

from 从哪张表中查找数据 [成绩表 score]

where 查询条件 [没有]

group by 分组条件 [平均成绩大于60分：avg(成绩) > 60]

order by 排序 [没有]；

*/

```sql
select 学号, avg(成绩) from score
group by 学号
having avg(成绩) > 60;
```

### 复杂查询



### 多表查询



### SQL 高级功能： 窗口函数

